<?php$result  = '域名或IP：'.$client->message."\n";$ip = gethostbyname($client->message);$result .= 'IP地址为：'.$ip."\n";boot::load('bin.cache');$cache = cache::read($ip, 'd:3');if ( !$cache ){	$ipaddr = file_get_contents('http://whois.pconline.com.cn/jsFunction.jsp?ip='.$ip);	$ipaddr = iconv('GB2312', 'UTF-8//IGNORE', $ipaddr);	$ipaddr = str_replace(array('if (window.IPCallBack){IPCallBack(\'', '\');}', "\r", "\n"), '', $ipaddr);	cache::write($ip, $ipaddr);}else{	$ipaddr = $cache."\n(缓存读取)";}$result .= '物理地址：'.$ipaddr;api::send($client, $result);?>